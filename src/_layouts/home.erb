<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <%= render "head", metadata: site.metadata, title: data.title %>
  <style>
    /* åŸºç¤ä½ˆå±€èˆ‡æ–‡å­—é–“è·å„ªåŒ– */
    body { 
      line-height: 1.9; /* æ‹‰å¤§è¡Œè· */
      color: #333;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    .docs-container { display: flex; max-width: 1200px; margin: 0 auto; padding: 20px; }
    .sidebar { width: 250px; position: sticky; top: 20px; height: calc(100vh - 40px); overflow-y: auto; padding-right: 20px; border-right: 1px solid #eee; font-size: 0.9rem; }
    .main-content { flex: 1; padding-left: 40px; max-width: 800px; }
    
    /* æ®µè½é–“è· */
    p { margin-bottom: 1.8rem; }
    li { margin-bottom: 0.8rem; } /* æ¸…å–®é …ç›®ä¹Ÿæ‹‰é–‹ä¸€é» */

    /* æ¨™é¡Œæ¨£å¼ */
    h2 { border-bottom: 2px solid #007bff; padding-bottom: 10px; margin-top: 50px; margin-bottom: 20px; color: #0056b3; }
    h3 { border-left: 5px solid #6c757d; padding-left: 10px; margin-top: 40px; margin-bottom: 15px; }
    
    /* å…¶ä»–åŠŸèƒ½å…ƒä»¶ */
    #progress-bar { position: fixed; top: 0; left: 0; height: 4px; background: #007bff; width: 0; z-index: 9999; }
    img { max-width: 550px !important; height: auto; display: block; margin: 30px 0; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); cursor: zoom-in; }
  </style>
</head>
<body>
  <div id="progress-bar"></div>
  <div class="docs-container">
    <nav class="sidebar">
      <h3 style="border:none; padding:0;">ğŸ“œ ç›®éŒ„</h3>
      <div id="toc"></div>
    </nav>
    <main class="main-content">
      <%= yield %>
    </main>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const toc = document.getElementById("toc");
      const headings = document.querySelectorAll(".main-content h2, .main-content h3");
      const tocList = document.createElement("ul");
      tocList.style.paddingLeft = "10px";
      headings.forEach((heading, index) => {
        const id = "section-" + index;
        heading.setAttribute("id", id);
        const li = document.createElement("li");
        li.style.listStyle = "none";
        li.style.marginBottom = "8px";
        const a = document.createElement("a");
        a.href = "#" + id;
        a.textContent = heading.textContent;
        a.style.textDecoration = "none";
        a.style.color = heading.tagName === "H2" ? "#333" : "#666";
        if (heading.tagName === "H2") a.style.fontWeight = "bold";
        li.appendChild(a);
        tocList.appendChild(li);
      });
      toc.appendChild(tocList);
      window.onscroll = function() {
        var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        document.getElementById("progress-bar").style.width = (winScroll / height) * 100 + "%";
      };
      document.querySelectorAll('.main-content img').forEach(img => {
        img.onclick = function() { window.open(this.src, '_blank'); };
      });
    });
  </script>
</body>
</html>
